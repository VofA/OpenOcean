<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>OpenOcean</title>
	<link rel="stylesheet" href="../admin/assets/css/materialize.min.css">
	<link rel="stylesheet" href="assets/css/common.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" >
</head>
<body>
	<div class="container">
		<ul class="collapsible popout" data-collapsible="accordion">
			<li>
				<div class="collapsible-header">
					<i class="material-icons">account_box</i>
					<div class="c-h-title" id="aa-t"></div>
					<div class="collapsible-done hide">
						<div class="progress"><div class="indeterminate"></div></div>
						<i class="material-icons hide">done</i>
					</div>
				</div>
				<div class="collapsible-body">
					<form id="aa-f" enctype="multipart/form-data" action="AdminAccount.php" method="POST">
						<div class="avatar circle">
							<input id="aa-a" type="file" name="avatar" style="display:none">
							<img id="aa-i" src="../admin/assets/img/user.png" alt="Set picture">
							<div class="after circle waves-effect waves-light">
								<i class="material-icons">add_a_photo</i>
							</div>
						</div>
						<div class="input-field">
							<input id="login" type="text" name="login" required>
							<label id="aa-l" for="login"></label>
						</div>
						<div class="input-field">
							<input id="password" type="password" name="password" required>
							<label id="aa-pw" for="password"></label>
							<i class="material-icons" id="aa-pwv">visibility_off</i>
						</div>
						<div class="input-field">
							<input id="email" type="email" name="email" required>
							<label id="aa-e" for="email"></label>
						</div>
						<a id="aa-n" class="waves-effect waves-light btn"></a>
					</form>
				</div>
			</li>
		</ul>
	</div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="../admin/assets/js/materialize.min.js"></script>
	<script src="../admin/assets/js/common.js"></script>

	<script>
	$(document).ready(function() {
		$('.collapsible').unbind('click');

		languageLoad('languages/{languagesDefault}.json');
		$('.collapsible').collapsible('open', 0);

		$('#aa-pwv').click(function(){
			$(this).text(function(a, b){
				return b === 'visibility' ? 'visibility_off' : 'visibility'
			});
			// заменить type=password на type=text
		});

		function readURL(input) {

			if (input.files && input.files[0]) {
				var reader = new FileReader();

				reader.onload = function (e) {
					$('#aa-i').attr('src', e.target.result);
				}

				reader.readAsDataURL(input.files[0]);
			}
		}

		$('#aa-n').on('click', function() {
			var formData = new FormData(document.querySelector("#aa-f"));

			$.ajax({
				type: "POST",
				url: "AdminAccount.php",
				processData: false,
    			contentType: false,
				data: formData,
				success: function(data) {
					console.log(data);
				}
			});
		});

		$("#aa-a").change(function(){
			readURL(this);
		});
		$('.after').on('click', function() {
			$('#aa-a').trigger('click');
		});

	});
	</script>
</body>
</html>
